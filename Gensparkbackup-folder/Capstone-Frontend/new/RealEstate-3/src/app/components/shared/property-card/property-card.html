<!-- Enhanced Property Card -->
<div class="card h-100 shadow-sm property-card">
  <!-- Image Container with Overlay -->
  <div class="property-image-container">
    <img
      [src]="listing.imageUrls.length > 0 ? listing.imageUrls[0] : 'https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg'"
      alt="Property Image"
      class="property-image"
      [routerLink]="['/property', listing.id]"
    />
    
    <!-- Image Overlay -->
    <div class="property-overlay"></div>
    
    <!-- Property Status Badge -->
    <div class="property-badges">
      <span class="badge property-badge">
        {{ listing.listingType || 'For Sale' }}
      </span>
    </div>
    
    <!-- Favorite Button -->
    <!-- <button class="favorite-btn" title="Add to Favorites">
      <i class="bi bi-heart"></i>
    </button> -->
    
    <!-- Management Actions (for agents) -->
    <!-- <div class="manage-actions" *ngIf="showManageOptions && isAgent()">
      <button class="manage-btn edit" 
              [routerLink]="['/agent/edit', listing.id]"
              title="Edit Property">
        <i class="bi bi-pencil"></i>
      </button>
      <button class="manage-btn delete" 
              (click)="onDelete()"
              title="Delete Property">
        <i class="bi bi-trash"></i>
      </button>
    </div> -->
  </div>
  
  <!-- Card Body -->
  <div class="card-body d-flex flex-column">
    <!-- Property Title -->
    <h5 class="property-title">{{ listing.title | truncate:35 }}</h5>
    
    <!-- Location -->
    <div class="property-location">
      <i class="bi bi-geo-alt-fill"></i>
      <span>{{ listing.location | truncate:30 }}</span>
    </div>
    
    <!-- Property Features -->
    <div class="property-features">
      <span class="feature-badge">
        <i class="bi bi-door-closed"></i>
        {{ listing.bedrooms }} Beds
      </span>
      <span class="feature-badge">
        <i class="bi bi-droplet"></i>
        {{ listing.bathrooms }} Baths
      </span>
      <span class="feature-badge">
        <i class="bi bi-rulers"></i>
        {{ listing.squareFeet | number }} sq.ft
      </span>
    </div>
    
    <!-- Price -->
    <div class="property-price">{{ formattedPrice }}</div>
    
    <!-- Actions -->
    <div class="mt-auto">
      <div class="property-actions">
        <!-- View Button -->
        <button 
          class="btn btn-view"
          [routerLink]="isBuyer() ? ['/buyer/property', listing.id] : isAgent()? ['/agent/property', listing.id] : ['/admin/property', listing.id]"
        >
          <i class="bi bi-eye me-1"></i>
          View Details
        </button>
        
        <!-- Inquire Button (for buyers) -->
        <button 
          *ngIf="showInquireButton && isBuyer()"
          class="btn btn-action btn-inquire"
          (click)="openInquiryModal()"
        >
          <i class="bi bi-chat-dots"></i>
        </button>
        
        <!-- Edit Button (for agents) -->
        <button 
          *ngIf="showManageOptions && isAgent()"
          class="btn btn-action btn-edit"
          [routerLink]="['/agent/edit', listing.id]"
        >
          <i class="bi bi-pencil"></i>
        </button>
        
        <!-- Delete Button (for agents) -->
        <button 
          *ngIf="showManageOptions && isAgent()"
          class="btn btn-action btn-delete"
          (click)="onDelete()"
        >
          <i class="bi bi-trash"></i>
        </button>
      </div>
    </div>
  </div>
</div>